function performQuery() {
    var outputText = document.getElementById('outputText');
    outputText.value = '查询中...';

    var input = document.getElementById('inputText').value;
    var result = queryFunction(input);
    updateOutput(result)
}

function updateOutput(output) {
    document.getElementById('outputText').value = output;
}

function copyOutput() {
    var outputText = document.getElementById('outputText');
    outputText.select();
    document.execCommand('copy');
}

function copyOutputID() {
    let outputText = document.getElementById('outputText').value;
    let outputLines = outputText.split(/\r?\n/);

    let idStr = "";
    for (let i = 0; i < outputLines.length; i++) {
        let line = outputLines[i];

        // 过滤掉没有分隔符的行
        if (line.indexOf("\t") === -1) {
            continue;
        }

        let lineArr = line.split("\t");
        let id = lineArr[0];
        let name = lineArr[1];

        idStr += id + "\n";
    }

    navigator.clipboard.writeText(idStr).then(function () {
        document.getElementById('outputText').select();
    });
}

function clearOutput() {
    var outputText = document.getElementById('outputText');
    outputText.value = '';
}

function clearInputAndOutput() {
    var outputText = document.getElementById('outputText');
    outputText.value = '';

    var inputText = document.getElementById('inputText');
    inputText.value = '';
}


function queryFunction(input) {

    let lines = input.split(/\r?\n/);

    let result = [];
    for (var i = 0; i < lines.length; i++) {
        let line = lines[i];

        // 过滤掉没有分隔符的行
        if (line.indexOf("\t") === -1) {
            continue;
        }

        let lineArr = line.split("\t");
        let id = lineArr[0];
        let name = lineArr[1];

        if (!containsChineseCharacters(name) && !containsChinesePinYin(name)) {
            continue;
        }

        result.push(line);
    }

    if (result.length === 0) {
        return "无中文名";
    }

    return result.join("\n");
}

// 正则表达式匹配汉字
function containsChineseCharacters(str) {
    let regex = /[\u4e00-\u9fff]/;
    return regex.test(str);
}

// 匹配外文拼音
function containsChinesePinYin(str) {
    // 将数组中的名称拼接成一个正则表达式字符串
    var regexString = nameKeywords.map(name => escapeRegExp(name)).join('|');

    // 名字前
    var regex_1 = new RegExp('^(' + regexString + ') ');

    // 名字后
    var regex_2 = new RegExp(' (' + regexString + ')$');

    return regex_1.test(str) || regex_2.test(str);
}

// 转义正则表达式中特殊字符的函数
function escapeRegExp(string) {
    return string.replace(/[.*+?^${}()|[\]\\]/g, '\\$&'); // $& 表示匹配到的子字符串
}

let nameKeywords = [
    "Ai",
    "An",
    "Ang",
    // "Ann",
    "Ao",
    "Au",
    "Auyeung",
    "Aw",
    "Ba",
    "Bai",
    "Baili",
    "Bak",
    "Ban",
    "Bang",
    "Bao",
    "Bee",
    "Beh",
    "Bei",
    "Ben",
    "Bi",
    "Bian",
    "Bie",
    "Bik",
    "Bing",
    "Bo",
    "Boey",
    "Bok",
    "Bong",
    "Boo",
    "Boon",
    "Boong",
    "Bu",
    "Buang",
    "Buay",
    "Bung",
    "Cai",
    "Cang",
    "Cao",
    "Cen",
    "Ch'ng",
    "Cha",
    "Chai",
    "Chak",
    "Cham",
    "Chan",
    "Chan-yu",
    "Chang",
    "Chang-sun",
    "Chanyu",
    "Chao",
    "Chap",
    "Chau",
    "Che",
    "Cheah",
    "Chee",
    "Cheh",
    "Chek",
    "Chen",
    "Cheng",
    "Cheoh",
    "Cheong",
    "Cheow",
    "Cher",
    "Cheu",
    "Cheuk",
    "Cheung",
    "Cheungsuen",
    "Chew",
    "Chi",
    "Chi-Tiao",
    "Chia",
    "Chia-ku",
    "Chiah",
    "Chiam",
    "Chiang",
    "Chiao",
    "Chiau",
    "Chien",
    "Chieng",
    "Chiew",
    "Chih",
    "Chik",
    "Chin",
    "Ching",
    "Chio",
    "Chioh",
    "Chiong",
    "Chiu",
    "Chng",
    "Cho",
    "Chock",
    "Choh",
    "Choi",
    "Chok",
    "Choke",
    "Chong",
    "Choo",
    "Chor",
    "Chou",
    "Chow",
    "Chu",
    "Chu-ko",
    "Chua",
    "Chuah",
    "Chuan",
    "Chuang",
    "Chueh",
    "Chuen",
    "Chui",
    "Chuk",
    "Chukok",
    "Chun",
    "Chun-yu",
    "Chung",
    "Chung-li",
    "Chung-sun",
    "Chungsuen",
    "Chunyu",
    "Chwee",
    "Cong",
    "Cui",
    "Da",
    "Dai",
    "Dang",
    "Dea",
    "Deng",
    "Dhai",
    "Di",
    "Diao",
    "Dick",
    "Ding",
    "Diwu",
    "Dong",
    "Dongfang",
    "Dongguo",
    "Dongmen",
    "Dou",
    "Du",
    "Duan",
    "Duangan",
    "Duanmu",
    "Dung",
    "Ek",
    "Eng",
    "Eow",
    "Er",
    "Eu",
    "Eung",
    "Ewu",
    "Fa",
    "Faa",
    "Fah",
    "Fam",
    "Fan",
    "Fang",
    "Faun",
    "Fei",
    "Feng",
    "Fha",
    "Foh",
    "Fok",
    "Fong",
    "Foo",
    "Foong",
    "Fu",
    "Fuk",
    "Fung",
    "Gai",
    "Gan",
    "Gao",
    "Ge",
    "Geh",
    "Geng",
    "Giam",
    "Gin",
    "Goh",
    "Goi",
    "Gong",
    "Gongliang",
    "Gongsun",
    "Gongxi",
    "Gongyang",
    "Gongye",
    "Goo",
    "Goon",
    "Gou",
    "Gu",
    "Guan",
    "Guang",
    "Gui",
    "Guliang",
    "Guo",
    "Ha",
    "Hahau",
    "Hai",
    "Hak",
    "Ham",
    "Han",
    "Hang",
    "Hao",
    "Har",
    "Hau",
    "Hay",
    "He",
    "Hee",
    "Helian",
    "Heng",
    "Heoi",
    "Heung",
    "Hia",
    "Hiah",
    "Hian",
    "Hiang",
    "Hii",
    "Him",
    "Hinyuen",
    "Hiok",
    "Hiung",
    "Hng",
    "Ho",
    "Ho-lien",
    "Hoa",
    "Hoh",
    "Hoi",
    "Hok",
    "Hon",
    "Hong",
    "Hoo",
    "Hooi",
    "Hoon",
    "Hor",
    "Hou",
    "How",
    "Hsi",
    "Hsi-men",
    "Hsia",
    "Hsia-hou",
    "Hsiang",
    "Hsiao",
    "Hsieh",
    "Hsien",
    "Hsien-yu",
    "Hsin",
    "Hsing",
    "Hsiung",
    "Hsu",
    "Hsuan",
    "Hsuan-yuan",
    "Hsueh",
    "Hsun",
    "Hu",
    "Hu-yen",
    "Hua",
    "Huai",
    "Huan",
    "Huang",
    "Huang-fu",
    "Huangfu",
    "Huay",
    "Hui",
    "Hung",
    "Huo",
    "Huong",
    "Huyan",
    "Hwee",
    "Hye",
    "Ip",
    "Jan",
    "Jao",
    "Je",
    "Jee",
    "Jeh",
    "Jen",
    "Jeow",
    "Ji",
    "Jia",
    "Jiagu",
    "Jiam",
    "Jian",
    "Jiang",
    "Jiao",
    "Jiau",
    "Jim",
    "Jin",
    "Jing",
    "Jong",
    "Joo",
    "Jor",
    "Ju",
    "Juan",
    "Juay",
    "Jui",
    "Jung",
    "Ka",
    "Kah",
    "Kai",
    "Kak",
    "Kam",
    "Kan",
    "Kang",
    "Kao",
    "Kau",
    "Ke",
    "Kee",
    "Keh",
    "Kei",
    "Kek",
    "Keng",
    "Keoh",
    "Keow",
    "Ker",
    "Kerh",
    "Keu",
    "Keung",
    "Kew",
    "Khak",
    "Kham",
    "Khang",
    "Khaw",
    "Khek",
    "Khew",
    "Khiah",
    "Khiang",
    "Kho",
    "Khong",
    "Khoo",
    "Khor",
    "Khow",
    "Khu",
    "Ki",
    "Kia",
    "Kiah",
    "Kiang",
    "Kiao",
    "Kiau",
    "Kiew",
    "Kik",
    // "Kim",
    "King",
    "Kiong",
    "Kiu",
    "Ko",
    "Koa",
    "Koay",
    "Koe",
    "Koh",
    "Koi",
    "Kok",
    "Kon",
    "Kong",
    "Koo",
    "Kor",
    "Kot",
    "Kou",
    "Kow",
    "Ku",
    "Ku-liang",
    "Kua",
    "Kuai",
    "Kuan",
    "Kuang",
    "Kue",
    "Kueh",
    "Kuei",
    "Kuek",
    "Kuen",
    "Kui",
    "Kuit",
    "Kuk",
    "Kung",
    "Kung-hsi",
    "Kung-liang",
    "Kung-sun",
    "Kung-yang",
    "Kung-yeh",
    "Kungleung",
    "Kungsai",
    "Kungsuen",
    "Kungyeung",
    "Kuo",
    "Kut",
    "Kwai",
    "Kwan",
    "Kwang",
    "Kwee",
    "Kwoh",
    "Kwok",
    "Kwong",
    "Kwun",
    "Lai",
    "Lak",
    "Lam",
    "Lan",
    "Lang",
    "Lao",
    "Lau",
    "Law",
    "Lay",
    "Le",
    "Lee",
    "Lei",
    "Lek",
    "Leng",
    "Leo",
    "Leong",
    "Leow",
    "Leung",
    "Lew",
    "Lewe",
    "Li",
    "Liam",
    "Lian",
    "Liang",
    "Liang-chiu",
    "Liangqiu",
    "Liao",
    "Liau",
    "Lien",
    "Lieu",
    "Liew",
    "Lim",
    "Lin",
    "Ling",
    "Ling-hu",
    "Linghu",
    "Lingwoo",
    "Liong",
    "Lip",
    "Liu",
    "Lo",
    "Loh",
    "Loi",
    "Lok",
    "Loke",
    "Lon",
    "Long",
    "Loo",
    "Looi",
    "Loong",
    "Lor",
    "Lou",
    "Louie",
    "Low",
    "Loy",
    "Lu",
    "Lu-chiu",
    "Luan",
    "Luang",
    "Luen",
    "Lui",
    "Luk",
    "Lum",
    "Lun",
    "Lung",
    "Luo",
    "Luqiu",
    "Lye",
    "Ma",
    "Mah",
    "Mai",
    "Mak",
    "Man",
    "Mang",
    "Manyan",
    "Mao",
    "Mau",
    "May",
    "Mei",
    "Meng",
    "Mha",
    "Mi",
    "Miang",
    "Miao",
    "Miau",
    "Mie",
    "Mik",
    "Min",
    "Ming",
    "Miu",
    "Mo",
    "Mo-chi",
    "Moey",
    "Moh",
    "Moi",
    "Mok",
    "Mok Kee",
    "Moma",
    "Mong",
    "Moo",
    "Moqi",
    "Mor",
    "Mou",
    "Mow",
    "Moyung",
    "Mu",
    "Mu-jung",
    "Mua",
    "Muan",
    "Mui",
    "Muk",
    "Mun",
    "Mung",
    "Murong",
    "Na",
    "Nah",
    "Nai",
    "Nam",
    "Namkung",
    "Nammun",
    "Nan-kung",
    "Nan-men",
    "Nang",
    "Nangong",
    "Nanmen",
    "Nau",
    "Nee",
    "Neo",
    "Neoh",
    "New",
    "Ng",
    "Nga",
    "Ngai",
    "Ngak",
    "Ngam",
    "Ngan",
    "Ngau",
    "Ngee",
    "Ngen",
    "Ngiam",
    "Ngiang",
    "Ngieng",
    "Ngim",
    "Ngo",
    "Ngoh",
    "Ngok",
    "Ngor",
    "Ngu",
    "Nguang",
    "Ngui",
    "Ngwan",
    "Ngwee",
    "Ni",
    "Nian",
    "Niap",
    "Nie",
    "Nieh",
    "Nien",
    "Nin",
    "Ning",
    "Nip",
    "Niu",
    "Nong",
    "Nung",
    "Oh",
    "Oi",
    "Ok",
    "On",
    "Ong",
    "Ooi",
    "Oon",
    "Or",
    "Ou",
    "Ou-yang",
    "Ouyang",
    "Ow",
    "Pa",
    "Pai",
    "Pai-li",
    "Pak",
    "Pan",
    "Pang",
    "Pao",
    "Pau",
    "Peh",
    "Pei",
    "Qing",
    "Pek",
    "Pen",
    "Peng",
    "Per",
    "Phan",
    "Phang",
    "Pheng",
    "Phong",
    "Phoo",
    "Phua",
    "Phun",
    "Pi",
    "Piak",
    "Piang",
    "Pieh",
    "Pien",
    "Pin",
    "Ping",
    "Piong",
    "Pit",
    "Po",
    "Poh",
    "Pok",
    "Pong",
    "Poo",
    "Poon",
    "Pou",
    "Pow",
    "Pu",
    "Pu-yang",
    "Puay",
    "Pui",
    "Puk",
    "Pun",
    "Pung",
    "Put",
    "Puu",
    "Puyang",
    "Qi",
    "Qian",
    "Qiang",
    "Qiao",
    "Qidiao",
    "Qiguan",
    "Qin",
    "Qiu",
    "Qu",
    "Quah",
    "Quan",
    "Quat",
    "Que",
    "Quek",
    "Ran",
    "Rao",
    "Ren",
    "Riam",
    "Rong",
    "Ru",
    "Ruan",
    "Rui",
    "Saimun",
    "San",
    "Sang",
    "Sao",
    "Sau",
    "Saw",
    "Seah",
    "See",
    "See Beh",
    "Seh",
    "Seng",
    "Seong",
    "Seow",
    "Ser",
    "Seu",
    "Seung",
    "Sew",
    "Sha",
    "Shan",
    "Shang",
    "Shang-kuan",
    "Shangguan",
    "Shao",
    "Shau",
    "Shaw",
    "She",
    "Sheh",
    "Shek",
    "Shen",
    "Shen-tu",
    "Sheng",
    "Sheng Kwan",
    "Shentu",
    "Sheung",
    "Sheungkwun",
    "Shi",
    "Shih",
    "Shim",
    "Shing",
    "Shiu",
    "Shong",
    "Shou",
    "Shu",
    "Shuai",
    "Shuang",
    "Shui",
    "Shum",
    "Shun",
    "Si",
    "Sia",
    "Siah",
    "Siang",
    "Siang Woo",
    "Siao",
    "Siau",
    "Siaw",
    "Siew",
    "Sih",
    "Sii",
    "Sik",
    "Sikong",
    "Sikou",
    "Silk",
    "Sim",
    "Sima",
    "Sin",
    "Sing",
    "Sioh",
    "Siong",
    "Siow",
    "Sip",
    "Sit",
    "Situ",
    "Siu",
    "Sng",
    "So",
    "Soh",
    "Sok",
    "Song",
    "Soo",
    "Soon",
    "Soong",
    "Ssu",
    "Ssu-kung",
    "Ssu-ma",
    "Ssu-tu",
    "Su",
    "Su Ho",
    "Sua",
    "Suang",
    "Suen",
    "Sui",
    "Suk",
    "Sum",
    "Sun",
    "Sung",
    "Suo",
    "Sz",
    "Sze",
    "Szehung",
    "Szekau",
    "Szema",
    "Szeto",
    "Ta",
    "Tai",
    "Tai-shu",
    "Taing",
    "Taishu",
    "Tam",
    "Tan",
    "Tan-tai",
    "Tang",
    "Tantai",
    "Tao",
    "Tau",
    "Tay",
    "Te",
    "Tee",
    "Teh",
    "Tek",
    "Ten",
    "Teng",
    "Teo",
    "Teoh",
    "Teow",
    "Teung",
    "Tey",
    "Thai",
    "Tham",
    "Thang",
    "Then",
    "Theng",
    "Thia",
    "Thien",
    "Tho",
    "Thong",
    "Thung",
    "Ti",
    "Ti-wu",
    "Tia",
    "Tiah",
    "Tian",
    "Tiang",
    "Tiao",
    "Tiau",
    "Tie",
    "Tien",
    "Tiew",
    "Tik",
    "Tim",
    "Tin",
    "Ting",
    "Tiong",
    "Tiu",
    "Tjan",
    "Tng",
    "To",
    "To-pa",
    "Toe",
    "Toh",
    "Tok",
    "Tong",
    "Too",
    "Tor",
    "Tou",
    "Tow",
    "Tsai",
    "Tsan",
    "Tsang",
    "Tsao",
    "Tse",
    "Tsen",
    "Tseng",
    "Tshan",
    "Tshang",
    "Tshui",
    "Tsik",
    "Tsim",
    "Tso",
    "Tsoi",
    "Tsok",
    "Tsou",
    "Tsu",
    "Tsui",
    "Tsung",
    "Tsung-cheng",
    "Tsz",
    "Tu",
    "Tuan",
    "Tuan-kan",
    "Tuan-mu",
    "Tuen",
    "Tuk",
    "Tun",
    "Tung",
    "Tung-fang",
    "Tung-kuo",
    "Tung-men",
    "Tungfong",
    "Tungmun",
    "Tuoba",
    "Tze",
    "Tzu",
    "Un",
    "Vang",
    "Vei",
    "Voo",
    "Voon",
    "Vu",
    "Vung",
    "Wa",
    "Wah",
    "Wai",
    "Waichi",
    "Wak",
    "Wan",
    "Wang",
    "Wat",
    "Way",
    "We",
    "Wee",
    "Wei",
    "Weisheng",
    "Wen",
    "Wen-jen",
    "Weng",
    "Wenren",
    "Wha",
    "Wing",
    "Wo",
    "Woh",
    "Woi",
    "Won",
    "Wong",
    "Woo",
    "Woon",
    "Wu",
    "Wu-ma",
    "Wuh",
    "Wuma",
    "Wun",
    "Wung",
    "Xi",
    "Xia",
    "Xiahou",
    "Xian",
    "Xiang",
    "Xiangsi",
    "Xianyu",
    "Xiao",
    "Xie",
    "Ximen",
    "Xin",
    "Xing",
    "Xiong",
    "Xu",
    "Xuan",
    "Xuanyuan",
    "Xue",
    "Xun",
    "Yam",
    "Yan",
    "Yang",
    "Yangshe",
    "Yao",
    "Yap",
    "Yau",
    "Yaw",
    "Ye",
    "Yee",
    "Yeh",
    "Yen",
    "Yeo",
    "Yeoh",
    "Yeong",
    "Yeung",
    "Yew",
    "Yho",
    "Yi",
    "Yii",
    "Yik",
    "Yim",
    "Yin",
    "Ying",
    "Yip",
    "Yiu",
    "Yong",
    "Yoong",
    "You",
    "Yow",
    "Yu",
    "Yu-chih",
    "Yu-wen",
    "Yuan",
    "Yuchi",
    "Yue",
    "Yueh",
    "Yueh-cheng",
    "Yuen",
    "Yuezheng",
    "Yuh",
    "Yuk",
    "Yuman",
    "Yun",
    "Yung",
    "Yuwen",
    "Zai",
    "Zaifu",
    "Zan",
    "Zang",
    "Zeng",
    "Zhai",
    "Zhan",
    "Zhang",
    "Zhangsun",
    "Zhao",
    "Zhen",
    "Zheng",
    "Zhi",
    "Zhong",
    "Zhongli",
    "Zhongsun",
    "Zhou",
    "Zhu",
    "Zhuang",
    "Zhuansun",
    "Zhuge",
    "Zhuo",
    "Zi",
    "Ziam",
    "Ziche",
    "Zong",
    "Zongzheng",
    "Zou",
    "Zu",
    "Zuo",
    "Zuoqiu",
    "Hiew",
];
