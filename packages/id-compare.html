<!DOCTYPE html>
<html>

<head>
    <base target="_top">
    <title>Square Calculator</title>
    <style>
        /* è‡ªå®šä¹‰æ ·å¼ï¼Œå¯ä»¥æ ¹æ®éœ€è¦è°ƒæ•´ */
        .input-textarea {
            float: left;
            width: 40%;
            margin-right: 10px;
        }

        .output-textarea {
            float: right;
            width: 40%;
            margin-left: 10px;
        }

        .center-button {
            display: flex;
            justify-content: center;
            margin-top: 10px;
        }

        .button-group {
            display: flex;
            flex-direction: column;
            /* å‚ç›´æ’åˆ— */
            justify-content: center;
            height: 100%;
        }

        footer {
            height: 30px;
            /* è®¾ç½®é¡µè„šé«˜åº¦ */
            background-color: #333;
            /* è®¾ç½®èƒŒæ™¯è‰² */
            color: #fff;
            /* è®¾ç½®æ–‡å­—é¢œè‰² */
            text-align: center;
            /* æ–‡å­—å±…ä¸­ */
            line-height: 30px;
            /* è®¾ç½®è¡Œé«˜ï¼Œä¿è¯æ–‡å­—åœ¨å‚ç›´æ–¹å‘å±…ä¸­ */
            position: fixed;
            /* å›ºå®šåœ¨é¡µé¢åº•éƒ¨ */
            bottom: 0;
            /* è·ç¦»é¡µé¢åº•éƒ¨è·ç¦» */
            width: 100%;
            /* å®½åº¦100%ï¼Œä¸é¡µé¢åŒå®½ */
        }
    </style>

    <link href="../node_modules/bootstrap/dist/css/bootstrap.min.css" rel="stylesheet">
</head>

<body>
    <div class="container mt-5">
        <h1 style="text-align:center">ID æ¯”è¾ƒå·¥å…·</h1>
        <p>æœ‰æ—¶ä¼šé‡åˆ°è¿™æ ·çš„åœºæ™¯ï¼šéœ€è¦ä»è®¸å¤šIDä¸­ï¼Œåˆ é™¤æ‰ä¸€éƒ¨åˆ†IDã€‚è¿™ä¸ªå·¥å…·å¯ä»¥æ–¹ä¾¿çš„å¤„ç†è¿™ä¸ªé—®é¢˜</p>

        <div class="row">
            <div class="col-md-6 text-left">
                <p class="text-left">ä½¿ç”¨è¯´æ˜ ğŸ‘‰ <a
                        href="https://docs.google.com/document/d/1Nuw4HVIbYaBn4Jt_oWYoYKIqLovccjM6WwlrXWnHjSI/edit?usp=sharing"
                        target="_black">é“¾æ¥</a></p>
            </div>
            <div class="col-md-6 text-right">
                <p class="text-right">é—®é¢˜åé¦ˆ ğŸ‘‰ <a
                        href="https://docs.google.com/spreadsheets/d/1DSqhoY1uVN3Kq0x73e_BZz4EQ6Kte8b2tL7_YLKVDbo/edit?gid=1998303978#gid=1998303978"
                        target="_black">é“¾æ¥</a></p>
            </div>
        </div>


        <div class="row">
            <div class="col-md-3">
                <textarea id="inputText" class="form-control input-textarea" style="height: 350px;"
                    placeholder="æ‰€æœ‰ID"></textarea>
            </div>

            <div class="col-md-3">
                <textarea id="inputTextRemove" class="form-control input-textarea" style="height: 350px;"
                    placeholder="è¦åˆ é™¤çš„ID"></textarea>
            </div>

            <div class="col-md-2">
                <div class="button-group h-100 d-flex flex-column justify-content-center">
                    <button class="btn btn-primary mb-2" onclick="performQuery()">ç§»é™¤</button>
                    <button class="btn btn-success mb-2" onclick="copyOutput()">å¤åˆ¶</button>
                    <button class="btn btn-danger" onclick="clearInputAndOutput()">æ¸…ç©º</button>
                </div>
            </div>

            <div class="col-md-4">
                <textarea id="outputText" class="form-control output-textarea" style="height: 350px;" readonly
                    placeholder="ç»“æœå°†å±•ç¤ºåœ¨è¿™é‡Œ"></textarea>
            </div>
        </div>
    </div>

    <footer> version : 1.0.0 </footer>

    <script>
        function performQuery() {
            var outputText = document.getElementById('outputText');
            outputText.value = 'å¤„ç†ä¸­...';

            var inputAll = document.getElementById('inputText').value;
            var inputRemove = document.getElementById('inputTextRemove').value;

            var result = queryFunction(inputAll, inputRemove);

            updateOutput(result);
        }

        function updateOutput(output) {
            document.getElementById('outputText').value = output;
        }

        function copyOutput() {
            var outputText = document.getElementById('outputText');
            outputText.select();
            document.execCommand('copy');
        }

        function clearInputAndOutput() {
            var outputText = document.getElementById('outputText');
            outputText.value = '';

            var inputText = document.getElementById('inputText');
            outputText.value = '';

            var inputText2 = document.getElementById('inputTextRemove');
            inputText2.value = '';
        }

        function queryFunction(inputAll, inputRemove) {

            let linesAll = inputAll.replace(/ +/g, '').split(/\r?\n/);
            let linesRemove = inputRemove.replace(/ +/g, '').split(/\r?\n/);

            let result = arrayDifference(linesAll, linesRemove);

            return result.join("\n");
        }

        function arrayDifference(arr1, arr2) {
            return arr1.filter(element => !arr2.includes(element));
        }
    </script>
</body>

</html>